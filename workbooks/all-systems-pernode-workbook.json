{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 1,
      "content": {
        "json": "# üìä Transaction Count ‚Äì All Systems Overview\n---\nPer-node Transaction Count/sec and App Errors/sec across all systems. Each line = one node. If a node goes down, its line disappears."
      },
      "name": "header"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "timeRange",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 86400000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 604800000
                }
              ],
              "allowCustom": true
            },
            "label": "Time Range"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "parameters"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientA"
      },
      "name": "section-clienta"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientA ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientA/providers/microsoft.insights/components/ClientA-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-clienta"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientA ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientA/providers/microsoft.insights/components/ClientA-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-clienta"
    },
    {
      "type": 1,
      "content": {
        "json": "---"
      },
      "name": "divider-clienta"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientB"
      },
      "name": "section-clientb"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientB ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientB/providers/microsoft.insights/components/ClientB-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-clientb"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientB ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientB/providers/microsoft.insights/components/ClientB-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-clientb"
    },
    {
      "type": 1,
      "content": {
        "json": "---"
      },
      "name": "divider-clientb"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientC"
      },
      "name": "section-clientc"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientC ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientC/providers/microsoft.insights/components/ClientC-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-clientc"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientC ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientC/providers/microsoft.insights/components/ClientC-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-clientc"
    },
    {
      "type": 1,
      "content": {
        "json": "---"
      },
      "name": "divider-clientc"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientD"
      },
      "name": "section-clientd"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientD ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientD/providers/microsoft.insights/components/ClientD-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-clientd"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientD ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientD/providers/microsoft.insights/components/ClientD-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-clientd"
    },
    {
      "type": 1,
      "content": {
        "json": "---"
      },
      "name": "divider-clientd"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientE"
      },
      "name": "section-cliente"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientE ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientE/providers/microsoft.insights/components/ClientE-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-cliente"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientE ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientE/providers/microsoft.insights/components/ClientE-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-cliente"
    },
    {
      "type": 1,
      "content": {
        "json": "---"
      },
      "name": "divider-cliente"
    },
    {
      "type": 1,
      "content": {
        "json": "## üñ•Ô∏è ClientF"
      },
      "name": "section-clientf"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"Transaction Count\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientF ‚Äì Transaction Count/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientF/providers/microsoft.insights/components/ClientF-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gamerounds-clientf"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"App Errors\"\n| summarize round(sum(value) / 300.0, 2) by cloud_RoleInstance, bin(timestamp, 5m)\n| render timechart",
        "size": 0,
        "title": "ClientF ‚Äì App Errors/sec per node",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "crossComponentResources": [
          "/subscriptions/YOUR_SUBSCRIPTION_ID/resourceGroups/ClientF/providers/microsoft.insights/components/ClientF-ain"
        ],
        "visualization": "timechart",
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 0,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 0
              }
            }
          }
        }
      },
      "name": "gameerrors-clientf"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}